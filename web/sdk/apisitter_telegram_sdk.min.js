!function(x,C){"object"==typeof exports&&"object"==typeof module?module.exports=C():"function"==typeof define&&define.amd?define([],C):"object"==typeof exports?exports.io=C():x.io=C()}(this,function(){return function(x){function C(T){if(E[T])return E[T].exports;var B=E[T]={exports:{},id:T,loaded:!1};return x[T].call(B.exports,B,B.exports,C),B.loaded=!0,B.exports}var E={};return C.m=x,C.c=E,C.p="",C(0)}([function(x,C,E){"use strict";function T(O,N){"object"===("undefined"==typeof O?"undefined":B(O))&&(N=O,O=void 0),N=N||{};var q,D=R(O),I=D.source,L=D.id,H=D.path,M=S[L]&&H in S[L].nsps,z=N.forceNew||N["force new connection"]||!1===N.multiplex||M;return z?(_("ignoring socket cache for %s",I),q=A(I,N)):(S[L]||(_("new io instance for %s",I),S[L]=A(I,N)),q=S[L]),D.query&&!N.query&&(N.query=D.query),q.socket(D.path,N)}var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},R=E(1),P=E(7),A=E(13),_=E(3)("socket.io-client");x.exports=C=T;var S=C.managers={};C.protocol=P.protocol,C.connect=T,C.Manager=E(13),C.Socket=E(39)},function(x,C,E){(function(T){"use strict";var R=E(2),P=E(3)("socket.io-client:url");x.exports=function(A,_){var S=A;_=_||T.location,null==A&&(A=_.protocol+"//"+_.host),"string"==typeof A&&("/"===A.charAt(0)&&(A="/"===A.charAt(1)?_.protocol+A:_.host+A),/^(https?|wss?):\/\//.test(A)||(P("protocol-less url %s",A),A="undefined"==typeof _?"https://"+A:_.protocol+"//"+A),P("parse %s",A),S=R(A)),S.port||(/^(http|ws)$/.test(S.protocol)?S.port="80":/^(http|ws)s$/.test(S.protocol)&&(S.port="443")),S.path=S.path||"/";var O=-1!==S.host.indexOf(":"),N=O?"["+S.host+"]":S.host;return S.id=S.protocol+"://"+N+":"+S.port,S.href=S.protocol+"://"+N+(_&&_.port===S.port?"":":"+S.port),S}}).call(C,function(){return this}())},function(x){var E=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,T=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];x.exports=function(B){var R=B,P=B.indexOf("["),A=B.indexOf("]");-1!=P&&-1!=A&&(B=B.substring(0,P)+B.substring(P,A).replace(/:/g,";")+B.substring(A,B.length));for(var _=E.exec(B||""),S={},O=14;O--;)S[T[O]]=_[O]||"";return-1!=P&&-1!=A&&(S.source=R,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S}},function(x,C,E){(function(T){function _(){var O;try{O=C.storage.debug}catch(N){}return!O&&"undefined"!=typeof T&&"env"in T&&(O=T.env.DEBUG),O}C=x.exports=E(5),C.log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},C.formatArgs=function(O){var N=this.useColors;if(O[0]=(N?"%c":"")+this.namespace+(N?" %c":" ")+O[0]+(N?"%c ":" ")+"+"+C.humanize(this.diff),N){var q="color: "+this.color;O.splice(1,0,q,"color: inherit");var D=0,I=0;O[0].replace(/%[a-zA-Z%]/g,function(L){"%%"!==L&&(D++,"%c"===L&&(I=D))}),O.splice(I,0,q)}},C.save=function(O){try{null==O?C.storage.removeItem("debug"):C.storage.debug=O}catch(N){}},C.load=_,C.useColors=function(){return"undefined"!=typeof window&&window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},C.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(O){}}(),C.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],C.formatters.j=function(O){try{return JSON.stringify(O)}catch(N){return"[UnexpectedJSONParseError]: "+N.message}},C.enable(_())}).call(C,E(4))},function(x){function E(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function B(M){if(O===setTimeout)return setTimeout(M,0);if((O===E||!O)&&setTimeout)return O=setTimeout,setTimeout(M,0);try{return O(M,0)}catch(z){try{return O.call(null,M,0)}catch(U){return O.call(this,M,0)}}}function R(M){if(N===clearTimeout)return clearTimeout(M);if((N===T||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(M);try{return N(M)}catch(z){try{return N.call(null,M)}catch(U){return N.call(this,M)}}}function P(){L&&D&&(L=!1,D.length?I=D.concat(I):H=-1,I.length&&A())}function A(){if(!L){var M=B(P);L=!0;for(var z=I.length;z;){for(D=I,I=[];++H<z;)D&&D[H].run();H=-1,z=I.length}D=null,L=!1,R(M)}}function _(M,z){this.fun=M,this.array=z}function S(){}var O,N,q=x.exports={};!function(){try{O="function"==typeof setTimeout?setTimeout:E}catch(M){O=E}try{N="function"==typeof clearTimeout?clearTimeout:T}catch(M){N=T}}();var D,I=[],L=!1,H=-1;q.nextTick=function(M){var z=Array(arguments.length-1);if(1<arguments.length)for(var U=1;U<arguments.length;U++)z[U-1]=arguments[U];I.push(new _(M,z)),1!==I.length||L||B(A)},_.prototype.run=function(){this.fun.apply(null,this.array)},q.title="browser",q.browser=!0,q.env={},q.argv=[],q.version="",q.versions={},q.on=S,q.addListener=S,q.once=S,q.off=S,q.removeListener=S,q.removeAllListeners=S,q.emit=S,q.prependListener=S,q.prependOnceListener=S,q.listeners=function(){return[]},q.binding=function(){throw new Error("process.binding is not supported")},q.cwd=function(){return"/"},q.chdir=function(){throw new Error("process.chdir is not supported")},q.umask=function(){return 0}},function(x,C,E){function T(O){var N,q=0;for(N in O)q=(q<<5)-q+O.charCodeAt(N),q|=0;return C.colors[Math.abs(q)%C.colors.length]}function B(O){function N(){if(N.enabled){var q=N,D=+new Date,I=D-(S||D);q.diff=I,q.prev=S,q.curr=D,S=D;for(var L=Array(arguments.length),H=0;H<L.length;H++)L[H]=arguments[H];L[0]=C.coerce(L[0]),"string"!=typeof L[0]&&L.unshift("%O");var M=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,function(U,F){if("%%"===U)return U;M++;var X=C.formatters[F];if("function"==typeof X){var W=L[M];U=X.call(q,W),L.splice(M,1),M--}return U}),C.formatArgs.call(q,L);var z=N.log||C.log||console.log.bind(console);z.apply(q,L)}}return N.namespace=O,N.enabled=C.enabled(O),N.useColors=C.useColors(),N.color=T(O),"function"==typeof C.init&&C.init(N),N}C=x.exports=B.debug=B["default"]=B,C.coerce=function(O){return O instanceof Error?O.stack||O.message:O},C.disable=function(){C.enable("")},C.enable=function(O){C.save(O),C.names=[],C.skips=[];for(var N=("string"==typeof O?O:"").split(/[\s,]+/),q=N.length,D=0;D<q;D++)N[D]&&(O=N[D].replace(/\*/g,".*?"),"-"===O[0]?C.skips.push(new RegExp("^"+O.substr(1)+"$")):C.names.push(new RegExp("^"+O+"$")))},C.enabled=function(O){var N,q;for(N=0,q=C.skips.length;N<q;N++)if(C.skips[N].test(O))return!1;for(N=0,q=C.names.length;N<q;N++)if(C.names[N].test(O))return!0;return!1},C.humanize=E(6),C.names=[],C.skips=[],C.formatters={};var S},function(x){function E(N){if(N=N+"",!(100<N.length)){var q=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(N);if(q){var D=parseFloat(q[1]),I=(q[2]||"ms").toLowerCase();return"years"===I||"year"===I||"yrs"===I||"yr"===I||"y"===I?D*(365.25*S):"days"===I||"day"===I||"d"===I?D*S:"hours"===I||"hour"===I||"hrs"===I||"hr"===I||"h"===I?D*_:"minutes"===I||"minute"===I||"mins"===I||"min"===I||"m"===I?D*A:"seconds"===I||"second"===I||"secs"===I||"sec"===I||"s"===I?D*P:"milliseconds"===I||"millisecond"===I||"msecs"===I||"msec"===I||"ms"===I?D:void 0}}}function T(N){return N>=S?Math.round(N/S)+"d":N>=_?Math.round(N/_)+"h":N>=A?Math.round(N/A)+"m":N>=P?Math.round(N/P)+"s":N+"ms"}function B(N){return R(N,S,"day")||R(N,_,"hour")||R(N,A,"minute")||R(N,P,"second")||N+" ms"}function R(N,q,D){if(!(N<q))return N<1.5*q?Math.floor(N/q)+" "+D:Math.ceil(N/q)+" "+D+"s"}var P=1e3,A=60*P,_=60*A,S=24*_;x.exports=function(N,q){q=q||{};var D=typeof N;if("string"==D&&0<N.length)return E(N);if("number"==D&&!1===isNaN(N))return q.long?B(N):T(N);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(N))}},function(x,C,E){function T(){}function B(H){var M=""+H.type;return C.BINARY_EVENT!==H.type&&C.BINARY_ACK!==H.type||(M+=H.attachments+"-"),H.nsp&&"/"!==H.nsp&&(M+=H.nsp+","),null!=H.id&&(M+=H.id),null!=H.data&&(M+=JSON.stringify(H.data)),N("encoded %j as %s",H,M),M}function R(H,M){I.removeBlobs(H,function(U){var F=I.deconstructPacket(U),X=B(F.packet),W=F.buffers;W.unshift(X),M(W)})}function P(){this.reconstructor=null}function A(H){var M=0,z={type:+H.charAt(0)};if(null==C.types[z.type])return O();if(C.BINARY_EVENT===z.type||C.BINARY_ACK===z.type){for(var U="";"-"!==H.charAt(++M)&&(U+=H.charAt(M),M!=H.length););if(U!=+U||"-"!==H.charAt(M))throw new Error("Illegal attachments");z.attachments=+U}if("/"===H.charAt(M+1))for(z.nsp="";++M;){var F=H.charAt(M);if(","===F)break;if(z.nsp+=F,M===H.length)break}else z.nsp="/";var X=H.charAt(M+1);if(""!==X&&+X==X){for(z.id="";++M;){var F=H.charAt(M);if(null==F||+F!=F){--M;break}if(z.id+=H.charAt(M),M===H.length)break}z.id=+z.id}return H.charAt(++M)&&(z=_(z,H.substr(M))),N("decoded %s as %j",H,z),z}function _(H,M){try{H.data=JSON.parse(M)}catch(z){return O()}return H}function S(H){this.reconPack=H,this.buffers=[]}function O(){return{type:C.ERROR,data:"parser error"}}var N=E(3)("socket.io-parser"),q=E(8),D=E(9),I=E(11),L=E(12);C.protocol=4,C.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],C.CONNECT=0,C.DISCONNECT=1,C.EVENT=2,C.ACK=3,C.ERROR=4,C.BINARY_EVENT=5,C.BINARY_ACK=6,C.Encoder=T,C.Decoder=P,T.prototype.encode=function(H,M){if(H.type!==C.EVENT&&H.type!==C.ACK||!D(H.data)||(H.type=H.type===C.EVENT?C.BINARY_EVENT:C.BINARY_ACK),N("encoding packet %j",H),C.BINARY_EVENT===H.type||C.BINARY_ACK===H.type)R(H,M);else{var z=B(H);M([z])}},q(P.prototype),P.prototype.add=function(H){var M;if("string"==typeof H)M=A(H),C.BINARY_EVENT===M.type||C.BINARY_ACK===M.type?(this.reconstructor=new S(M),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",M)):this.emit("decoded",M);else{if(!L(H)&&!H.base64)throw new Error("Unknown type: "+H);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");M=this.reconstructor.takeBinaryData(H),M&&(this.reconstructor=null,this.emit("decoded",M))}},P.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},S.prototype.takeBinaryData=function(H){if(this.buffers.push(H),this.buffers.length===this.reconPack.attachments){var M=I.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),M}return null},S.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(x){function T(R){if(R)return B(R)}function B(R){for(var P in T.prototype)R[P]=T.prototype[P];return R}x.exports=T,T.prototype.on=T.prototype.addEventListener=function(R,P){return this._callbacks=this._callbacks||{},(this._callbacks["$"+R]=this._callbacks["$"+R]||[]).push(P),this},T.prototype.once=function(R,P){function A(){this.off(R,A),P.apply(this,arguments)}return A.fn=P,this.on(R,A),this},T.prototype.off=T.prototype.removeListener=T.prototype.removeAllListeners=T.prototype.removeEventListener=function(R,P){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var A=this._callbacks["$"+R];if(!A)return this;if(1==arguments.length)return delete this._callbacks["$"+R],this;for(var _,S=0;S<A.length;S++)if(_=A[S],_===P||_.fn===P){A.splice(S,1);break}return this},T.prototype.emit=function(R){this._callbacks=this._callbacks||{};var P=[].slice.call(arguments,1),A=this._callbacks["$"+R];if(A){A=A.slice(0);for(var _=0,S=A.length;_<S;++_)A[_].apply(this,P)}return this},T.prototype.listeners=function(R){return this._callbacks=this._callbacks||{},this._callbacks["$"+R]||[]},T.prototype.hasListeners=function(R){return!!this.listeners(R).length}},function(x,C,E){(function(T){function B(S){if(!S||"object"!=typeof S)return!1;if(R(S)){for(var O=0,N=S.length;O<N;O++)if(B(S[O]))return!0;return!1}if("function"==typeof T.Buffer&&T.Buffer.isBuffer&&T.Buffer.isBuffer(S)||"function"==typeof T.ArrayBuffer&&S instanceof ArrayBuffer||A&&S instanceof Blob||_&&S instanceof File)return!0;if(S.toJSON&&"function"==typeof S.toJSON&&1===arguments.length)return B(S.toJSON(),!0);for(var q in S)if(Object.prototype.hasOwnProperty.call(S,q)&&B(S[q]))return!0;return!1}var R=E(10),P=Object.prototype.toString,A="function"==typeof T.Blob||"[object BlobConstructor]"===P.call(T.Blob),_="function"==typeof T.File||"[object FileConstructor]"===P.call(T.File);x.exports=B}).call(C,function(){return this}())},function(x){var E={}.toString;x.exports=Array.isArray||function(T){return"[object Array]"==E.call(T)}},function(x,C,E){(function(T){function B(N,q){if(!N)return N;if(A(N)){var D={_placeholder:!0,num:q.length};return q.push(N),D}if(P(N)){for(var I=Array(N.length),L=0;L<N.length;L++)I[L]=B(N[L],q);return I}if("object"==typeof N&&!(N instanceof Date)){var I={};for(var H in N)I[H]=B(N[H],q);return I}return N}function R(N,q){if(!N)return N;if(N&&N._placeholder)return q[N.num];if(P(N))for(var D=0;D<N.length;D++)N[D]=R(N[D],q);else if("object"==typeof N)for(var I in N)N[I]=R(N[I],q);return N}var P=E(10),A=E(12),_=Object.prototype.toString,S="function"==typeof T.Blob||"[object BlobConstructor]"===_.call(T.Blob),O="function"==typeof T.File||"[object FileConstructor]"===_.call(T.File);C.deconstructPacket=function(N){var q=[],D=N.data,I=N;return I.data=B(D,q),I.attachments=q.length,{packet:I,buffers:q}},C.reconstructPacket=function(N,q){return N.data=R(N.data,q),N.attachments=void 0,N},C.removeBlobs=function(N,q){function D(H,M,z){if(!H)return H;if(S&&H instanceof Blob||O&&H instanceof File){I++;var U=new FileReader;U.onload=function(){z?z[M]=this.result:L=this.result,--I||q(L)},U.readAsArrayBuffer(H)}else if(P(H))for(var F=0;F<H.length;F++)D(H[F],F,H);else if("object"==typeof H&&!A(H))for(var X in H)D(H[X],X,H)}var I=0,L=N;D(L),I||q(L)}}).call(C,function(){return this}())},function(x,C){(function(E){x.exports=function(B){return E.Buffer&&E.Buffer.isBuffer(B)||E.ArrayBuffer&&B instanceof ArrayBuffer}}).call(C,function(){return this}())},function(x,C,E){"use strict";function T(L,H){if(!(this instanceof T))return new T(L,H);L&&"object"===("undefined"==typeof L?"undefined":B(L))&&(H=L,L=void 0),H=H||{},H.path=H.path||"/socket.io",this.nsps={},this.subs=[],this.opts=H,this.reconnection(!1!==H.reconnection),this.reconnectionAttempts(H.reconnectionAttempts||1/0),this.reconnectionDelay(H.reconnectionDelay||1e3),this.reconnectionDelayMax(H.reconnectionDelayMax||5e3),this.randomizationFactor(H.randomizationFactor||.5),this.backoff=new D({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==H.timeout?2e4:H.timeout),this.readyState="closed",this.uri=L,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var M=H.parser||_;this.encoder=new M.Encoder,this.decoder=new M.Decoder,this.autoConnect=!1!==H.autoConnect,this.autoConnect&&this.open()}var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},R=E(14),P=E(39),A=E(8),_=E(7),S=E(41),O=E(42),N=E(3)("socket.io-client:manager"),q=E(37),D=E(43),I=Object.prototype.hasOwnProperty;x.exports=T,T.prototype.emitAll=function(){for(var L in this.emit.apply(this,arguments),this.nsps)I.call(this.nsps,L)&&this.nsps[L].emit.apply(this.nsps[L],arguments)},T.prototype.updateSocketIds=function(){for(var L in this.nsps)I.call(this.nsps,L)&&(this.nsps[L].id=this.generateId(L))},T.prototype.generateId=function(L){return("/"===L?"":L+"#")+this.engine.id},A(T.prototype),T.prototype.reconnection=function(L){return arguments.length?(this._reconnection=!!L,this):this._reconnection},T.prototype.reconnectionAttempts=function(L){return arguments.length?(this._reconnectionAttempts=L,this):this._reconnectionAttempts},T.prototype.reconnectionDelay=function(L){return arguments.length?(this._reconnectionDelay=L,this.backoff&&this.backoff.setMin(L),this):this._reconnectionDelay},T.prototype.randomizationFactor=function(L){return arguments.length?(this._randomizationFactor=L,this.backoff&&this.backoff.setJitter(L),this):this._randomizationFactor},T.prototype.reconnectionDelayMax=function(L){return arguments.length?(this._reconnectionDelayMax=L,this.backoff&&this.backoff.setMax(L),this):this._reconnectionDelayMax},T.prototype.timeout=function(L){return arguments.length?(this._timeout=L,this):this._timeout},T.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},T.prototype.open=T.prototype.connect=function(L){if(N("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;N("opening %s",this.uri),this.engine=R(this.uri,this.opts);var M=this.engine,z=this;this.readyState="opening",this.skipReconnect=!1;var U=S(M,"open",function(){z.onopen(),L&&L()}),F=S(M,"error",function(G){if(N("connect_error"),z.cleanup(),z.readyState="closed",z.emitAll("connect_error",G),L){var Y=new Error("Connection error");Y.data=G,L(Y)}else z.maybeReconnectOnOpen()});if(!1!==this._timeout){var X=this._timeout;N("connect attempt will timeout after %d",X);var W=setTimeout(function(){N("connect attempt timed out after %d",X),U.destroy(),M.close(),M.emit("error","timeout"),z.emitAll("connect_timeout",X)},X);this.subs.push({destroy:function(){clearTimeout(W)}})}return this.subs.push(U),this.subs.push(F),this},T.prototype.onopen=function(){N("open"),this.cleanup(),this.readyState="open",this.emit("open");var L=this.engine;this.subs.push(S(L,"data",O(this,"ondata"))),this.subs.push(S(L,"ping",O(this,"onping"))),this.subs.push(S(L,"pong",O(this,"onpong"))),this.subs.push(S(L,"error",O(this,"onerror"))),this.subs.push(S(L,"close",O(this,"onclose"))),this.subs.push(S(this.decoder,"decoded",O(this,"ondecoded")))},T.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},T.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},T.prototype.ondata=function(L){this.decoder.add(L)},T.prototype.ondecoded=function(L){this.emit("packet",L)},T.prototype.onerror=function(L){N("error",L),this.emitAll("error",L)},T.prototype.socket=function(L,H){function M(){~q(U.connecting,z)||U.connecting.push(z)}var z=this.nsps[L];if(!z){z=new P(this,L,H),this.nsps[L]=z;var U=this;z.on("connecting",M),z.on("connect",function(){z.id=U.generateId(L)}),this.autoConnect&&M()}return z},T.prototype.destroy=function(L){var H=q(this.connecting,L);~H&&this.connecting.splice(H,1),this.connecting.length||this.close()},T.prototype.packet=function(L){N("writing packet %j",L);var H=this;L.query&&0===L.type&&(L.nsp+="?"+L.query),H.encoding?H.packetBuffer.push(L):(H.encoding=!0,this.encoder.encode(L,function(M){for(var z=0;z<M.length;z++)H.engine.write(M[z],L.options);H.encoding=!1,H.processPacketQueue()}))},T.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var L=this.packetBuffer.shift();this.packet(L)}},T.prototype.cleanup=function(){N("cleanup");for(var M,L=this.subs.length,H=0;H<L;H++)M=this.subs.shift(),M.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},T.prototype.close=T.prototype.disconnect=function(){N("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},T.prototype.onclose=function(L){N("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",L),this._reconnection&&!this.skipReconnect&&this.reconnect()},T.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var L=this;if(this.backoff.attempts>=this._reconnectionAttempts)N("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var H=this.backoff.duration();N("will wait %dms before reconnect attempt",H),this.reconnecting=!0;var M=setTimeout(function(){L.skipReconnect||(N("attempting reconnect"),L.emitAll("reconnect_attempt",L.backoff.attempts),L.emitAll("reconnecting",L.backoff.attempts),L.skipReconnect||L.open(function(z){z?(N("reconnect attempt error"),L.reconnecting=!1,L.reconnect(),L.emitAll("reconnect_error",z.data)):(N("reconnect success"),L.onreconnect())}))},H);this.subs.push({destroy:function(){clearTimeout(M)}})}},T.prototype.onreconnect=function(){var L=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",L)}},function(x,C,E){x.exports=E(15)},function(x,C,E){x.exports=E(16),x.exports.parser=E(23)},function(x,C,E){(function(T){function B(I,L){if(!(this instanceof B))return new B(I,L);L=L||{},I&&"object"==typeof I&&(L=I,I=null),I?(I=N(I),L.hostname=I.host,L.secure="https"===I.protocol||"wss"===I.protocol,L.port=I.port,I.query&&(L.query=I.query)):L.host&&(L.hostname=N(L.host).host),this.secure=null==L.secure?T.location&&"https:"===location.protocol:L.secure,L.hostname&&!L.port&&(L.port=this.secure?"443":"80"),this.agent=L.agent||!1,this.hostname=L.hostname||(T.location?location.hostname:"localhost"),this.port=L.port||(T.location&&location.port?location.port:this.secure?443:80),this.query=L.query||{},"string"==typeof this.query&&(this.query=D.decode(this.query)),this.upgrade=!1!==L.upgrade,this.path=(L.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!L.forceJSONP,this.jsonp=!1!==L.jsonp,this.forceBase64=!!L.forceBase64,this.enablesXDR=!!L.enablesXDR,this.timestampParam=L.timestampParam||"t",this.timestampRequests=L.timestampRequests,this.transports=L.transports||["polling","websocket"],this.transportOptions=L.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=L.policyPort||843,this.rememberUpgrade=L.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=L.onlyBinaryUpgrades,this.perMessageDeflate=!1!==L.perMessageDeflate&&(L.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=L.pfx||null,this.key=L.key||null,this.passphrase=L.passphrase||null,this.cert=L.cert||null,this.ca=L.ca||null,this.ciphers=L.ciphers||null,this.rejectUnauthorized=void 0===L.rejectUnauthorized||L.rejectUnauthorized,this.forceNode=!!L.forceNode;var H="object"==typeof T&&T;H.global===H&&(L.extraHeaders&&0<Object.keys(L.extraHeaders).length&&(this.extraHeaders=L.extraHeaders),L.localAddress&&(this.localAddress=L.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function R(I){var L={};for(var H in I)I.hasOwnProperty(H)&&(L[H]=I[H]);return L}var P=E(17),A=E(8),_=E(3)("engine.io-client:socket"),S=E(37),O=E(23),N=E(2),q=E(38),D=E(31);x.exports=B,B.priorWebsocketSuccess=!1,A(B.prototype),B.protocol=O.protocol,B.Socket=B,B.Transport=E(22),B.transports=E(17),B.parser=E(23),B.prototype.createTransport=function(I){_("creating transport \"%s\"",I);var L=R(this.query);L.EIO=O.protocol,L.transport=I;var H=this.transportOptions[I]||{};this.id&&(L.sid=this.id);var M=new P[I]({query:L,socket:this,agent:H.agent||this.agent,hostname:H.hostname||this.hostname,port:H.port||this.port,secure:H.secure||this.secure,path:H.path||this.path,forceJSONP:H.forceJSONP||this.forceJSONP,jsonp:H.jsonp||this.jsonp,forceBase64:H.forceBase64||this.forceBase64,enablesXDR:H.enablesXDR||this.enablesXDR,timestampRequests:H.timestampRequests||this.timestampRequests,timestampParam:H.timestampParam||this.timestampParam,policyPort:H.policyPort||this.policyPort,pfx:H.pfx||this.pfx,key:H.key||this.key,passphrase:H.passphrase||this.passphrase,cert:H.cert||this.cert,ca:H.ca||this.ca,ciphers:H.ciphers||this.ciphers,rejectUnauthorized:H.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:H.perMessageDeflate||this.perMessageDeflate,extraHeaders:H.extraHeaders||this.extraHeaders,forceNode:H.forceNode||this.forceNode,localAddress:H.localAddress||this.localAddress,requestTimeout:H.requestTimeout||this.requestTimeout,protocols:H.protocols||void 0});return M},B.prototype.open=function(){var I;if(this.rememberUpgrade&&B.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))I="websocket";else{if(0===this.transports.length){var L=this;return void setTimeout(function(){L.emit("error","No transports available")},0)}I=this.transports[0]}this.readyState="opening";try{I=this.createTransport(I)}catch(H){return this.transports.shift(),void this.open()}I.open(),this.setTransport(I)},B.prototype.setTransport=function(I){_("setting transport %s",I.name);var L=this;this.transport&&(_("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=I,I.on("drain",function(){L.onDrain()}).on("packet",function(H){L.onPacket(H)}).on("error",function(H){L.onError(H)}).on("close",function(){L.onClose("transport close")})},B.prototype.probe=function(I){function L(){if(Y.onlyBinaryUpgrades){var V=!this.supportsBinary&&Y.transport.supportsBinary;G=G||V}G||(_("probe transport \"%s\" opened",I),W.send([{type:"ping",data:"probe"}]),W.once("packet",function(K){if(!G)if("pong"===K.type&&"probe"===K.data){if(_("probe transport \"%s\" pong",I),Y.upgrading=!0,Y.emit("upgrading",W),!W)return;B.priorWebsocketSuccess="websocket"===W.name,_("pausing current transport \"%s\"",Y.transport.name),Y.transport.pause(function(){G||"closed"!==Y.readyState&&(_("changing transport and sending upgrade packet"),X(),Y.setTransport(W),W.send([{type:"upgrade"}]),Y.emit("upgrade",W),W=null,Y.upgrading=!1,Y.flush())})}else{_("probe transport \"%s\" failed",I);var J=new Error("probe error");J.transport=W.name,Y.emit("upgradeError",J)}}))}function H(){G||(G=!0,X(),W.close(),W=null)}function M(V){var K=new Error("probe error: "+V);K.transport=W.name,H(),_("probe transport \"%s\" failed because of error: %s",I,V),Y.emit("upgradeError",K)}function z(){M("transport closed")}function U(){M("socket closed")}function F(V){W&&V.name!==W.name&&(_("\"%s\" works - aborting \"%s\"",V.name,W.name),H())}function X(){W.removeListener("open",L),W.removeListener("error",M),W.removeListener("close",z),Y.removeListener("close",U),Y.removeListener("upgrading",F)}_("probing transport \"%s\"",I);var W=this.createTransport(I,{probe:1}),G=!1,Y=this;B.priorWebsocketSuccess=!1,W.once("open",L),W.once("error",M),W.once("close",z),this.once("close",U),this.once("upgrading",F),W.open()},B.prototype.onOpen=function(){if(_("socket open"),this.readyState="open",B.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){_("starting upgrade probes");for(var I=0,L=this.upgrades.length;I<L;I++)this.probe(this.upgrades[I])}},B.prototype.onPacket=function(I){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(_("socket receive: type \"%s\", data \"%s\"",I.type,I.data),this.emit("packet",I),this.emit("heartbeat"),I.type){case"open":this.onHandshake(q(I.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var L=new Error("server error");L.code=I.data,this.onError(L);break;case"message":this.emit("data",I.data),this.emit("message",I.data);}else _("packet received with socket readyState \"%s\"",this.readyState)},B.prototype.onHandshake=function(I){this.emit("handshake",I),this.id=I.sid,this.transport.query.sid=I.sid,this.upgrades=this.filterUpgrades(I.upgrades),this.pingInterval=I.pingInterval,this.pingTimeout=I.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},B.prototype.onHeartbeat=function(I){clearTimeout(this.pingTimeoutTimer);var L=this;L.pingTimeoutTimer=setTimeout(function(){"closed"!==L.readyState&&L.onClose("ping timeout")},I||L.pingInterval+L.pingTimeout)},B.prototype.setPing=function(){var I=this;clearTimeout(I.pingIntervalTimer),I.pingIntervalTimer=setTimeout(function(){_("writing ping packet - expecting pong within %sms",I.pingTimeout),I.ping(),I.onHeartbeat(I.pingTimeout)},I.pingInterval)},B.prototype.ping=function(){var I=this;this.sendPacket("ping",function(){I.emit("ping")})},B.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},B.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(_("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},B.prototype.write=B.prototype.send=function(I,L,H){return this.sendPacket("message",I,L,H),this},B.prototype.sendPacket=function(I,L,H,M){if("function"==typeof L&&(M=L,L=void 0),"function"==typeof H&&(M=H,H=null),"closing"!==this.readyState&&"closed"!==this.readyState){H=H||{},H.compress=!1!==H.compress;var z={type:I,data:L,options:H};this.emit("packetCreate",z),this.writeBuffer.push(z),M&&this.once("flush",M),this.flush()}},B.prototype.close=function(){function I(){M.onClose("forced close"),_("socket closing - telling transport to close"),M.transport.close()}function L(){M.removeListener("upgrade",L),M.removeListener("upgradeError",L),I()}function H(){M.once("upgrade",L),M.once("upgradeError",L)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var M=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?H():I()}):this.upgrading?H():I()}return this},B.prototype.onError=function(I){_("socket error %j",I),B.priorWebsocketSuccess=!1,this.emit("error",I),this.onClose("transport error",I)},B.prototype.onClose=function(I,L){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){_("socket close with reason: \"%s\"",I);var H=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",I,L),H.writeBuffer=[],H.prevBufferLen=0}},B.prototype.filterUpgrades=function(I){for(var L=[],H=0,M=I.length;H<M;H++)~S(this.transports,I[H])&&L.push(I[H]);return L}}).call(C,function(){return this}())},function(x,C,E){(function(T){var R=E(18),P=E(20),A=E(34),_=E(35);C.polling=function(S){var O,N=!1,q=!1,D=!1!==S.jsonp;if(T.location){var I="https:"===location.protocol,L=location.port;L||(L=I?443:80),N=S.hostname!==location.hostname||L!==S.port,q=S.secure!==I}if(S.xdomain=N,S.xscheme=q,O=new R(S),"open"in O&&!S.forceJSONP)return new P(S);if(!D)throw new Error("JSONP disabled");return new A(S)},C.websocket=_}).call(C,function(){return this}())},function(x,C,E){(function(T){var B=E(19);x.exports=function(R){var P=R.xdomain,A=R.xscheme,_=R.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!P||B))return new XMLHttpRequest}catch(S){}try{if("undefined"!=typeof XDomainRequest&&!A&&_)return new XDomainRequest}catch(S){}if(!P)try{return new T[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(S){}}}).call(C,function(){return this}())},function(x){try{x.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(E){x.exports=!1}},function(x,C,E){(function(T){function B(){}function R(D){if(S.call(this,D),this.requestTimeout=D.requestTimeout,this.extraHeaders=D.extraHeaders,T.location){var I="https:"===location.protocol,L=location.port;L||(L=I?443:80),this.xd=D.hostname!==T.location.hostname||L!==D.port,this.xs=D.secure!==I}}function P(D){this.method=D.method||"GET",this.uri=D.uri,this.xd=!!D.xd,this.xs=!!D.xs,this.async=!1!==D.async,this.data=void 0===D.data?null:D.data,this.agent=D.agent,this.isBinary=D.isBinary,this.supportsBinary=D.supportsBinary,this.enablesXDR=D.enablesXDR,this.requestTimeout=D.requestTimeout,this.pfx=D.pfx,this.key=D.key,this.passphrase=D.passphrase,this.cert=D.cert,this.ca=D.ca,this.ciphers=D.ciphers,this.rejectUnauthorized=D.rejectUnauthorized,this.extraHeaders=D.extraHeaders,this.create()}function A(){for(var D in P.requests)P.requests.hasOwnProperty(D)&&P.requests[D].abort()}var _=E(18),S=E(21),O=E(8),N=E(32),q=E(3)("engine.io-client:polling-xhr");x.exports=R,x.exports.Request=P,N(R,S),R.prototype.supportsBinary=!0,R.prototype.request=function(D){return D=D||{},D.uri=this.uri(),D.xd=this.xd,D.xs=this.xs,D.agent=this.agent||!1,D.supportsBinary=this.supportsBinary,D.enablesXDR=this.enablesXDR,D.pfx=this.pfx,D.key=this.key,D.passphrase=this.passphrase,D.cert=this.cert,D.ca=this.ca,D.ciphers=this.ciphers,D.rejectUnauthorized=this.rejectUnauthorized,D.requestTimeout=this.requestTimeout,D.extraHeaders=this.extraHeaders,new P(D)},R.prototype.doWrite=function(D,I){var H=this.request({method:"POST",data:D,isBinary:"string"!=typeof D&&void 0!==D}),M=this;H.on("success",I),H.on("error",function(z){M.onError("xhr post error",z)}),this.sendXhr=H},R.prototype.doPoll=function(){q("xhr poll");var D=this.request(),I=this;D.on("data",function(L){I.onData(L)}),D.on("error",function(L){I.onError("xhr poll error",L)}),this.pollXhr=D},O(P.prototype),P.prototype.create=function(){var D={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized},I=this.xhr=new _(D),L=this;try{q("xhr open %s: %s",this.method,this.uri),I.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var H in I.setDisableHeaderCheck&&I.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(H)&&I.setRequestHeader(H,this.extraHeaders[H])}catch(M){}if("POST"===this.method)try{this.isBinary?I.setRequestHeader("Content-type","application/octet-stream"):I.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(M){}try{I.setRequestHeader("Accept","*/*")}catch(M){}"withCredentials"in I&&(I.withCredentials=!0),this.requestTimeout&&(I.timeout=this.requestTimeout),this.hasXDR()?(I.onload=function(){L.onLoad()},I.onerror=function(){L.onError(I.responseText)}):I.onreadystatechange=function(){if(2===I.readyState){var M;try{M=I.getResponseHeader("Content-Type")}catch(z){}"application/octet-stream"===M&&(I.responseType="arraybuffer")}4===I.readyState&&(200===I.status||1223===I.status?L.onLoad():setTimeout(function(){L.onError(I.status)},0))},q("xhr data %s",this.data),I.send(this.data)}catch(M){return void setTimeout(function(){L.onError(M)},0)}T.document&&(this.index=P.requestsCount++,P.requests[this.index]=this)},P.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},P.prototype.onData=function(D){this.emit("data",D),this.onSuccess()},P.prototype.onError=function(D){this.emit("error",D),this.cleanup(!0)},P.prototype.cleanup=function(D){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=B:this.xhr.onreadystatechange=B,D)try{this.xhr.abort()}catch(I){}T.document&&delete P.requests[this.index],this.xhr=null}},P.prototype.onLoad=function(){var D;try{var I;try{I=this.xhr.getResponseHeader("Content-Type")}catch(L){}D="application/octet-stream"===I?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(L){this.onError(L)}null!=D&&this.onData(D)},P.prototype.hasXDR=function(){return"undefined"!=typeof T.XDomainRequest&&!this.xs&&this.enablesXDR},P.prototype.abort=function(){this.cleanup()},P.requestsCount=0,P.requests={},T.document&&(T.attachEvent?T.attachEvent("onunload",A):T.addEventListener&&T.addEventListener("beforeunload",A,!1))}).call(C,function(){return this}())},function(x,C,E){function T(N){var q=N&&N.forceBase64;O&&!q||(this.supportsBinary=!1),B.call(this,N)}var B=E(22),R=E(31),P=E(23),A=E(32),_=E(33),S=E(3)("engine.io-client:polling");x.exports=T;var O=function(){var N=E(18),q=new N({xdomain:!1});return null!=q.responseType}();A(T,B),T.prototype.name="polling",T.prototype.doOpen=function(){this.poll()},T.prototype.pause=function(N){function q(){S("paused"),D.readyState="paused",N()}var D=this;if(this.readyState="pausing",this.polling||!this.writable){var I=0;this.polling&&(S("we are currently polling - waiting to pause"),I++,this.once("pollComplete",function(){S("pre-pause polling complete"),--I||q()})),this.writable||(S("we are currently writing - waiting to pause"),I++,this.once("drain",function(){S("pre-pause writing complete"),--I||q()}))}else q()},T.prototype.poll=function(){S("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},T.prototype.onData=function(N){var q=this;S("polling got data %s",N);P.decodePayload(N,this.socket.binaryType,function(I){return"opening"===q.readyState&&q.onOpen(),"close"===I.type?(q.onClose(),!1):void q.onPacket(I)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():S("ignoring poll - transport state \"%s\"",this.readyState))},T.prototype.doClose=function(){function N(){S("writing close packet"),q.write([{type:"close"}])}var q=this;"open"===this.readyState?(S("transport open - closing"),N()):(S("transport not open - deferring close"),this.once("open",N))},T.prototype.write=function(N){var q=this;this.writable=!1;var D=function(){q.writable=!0,q.emit("drain")};P.encodePayload(N,this.supportsBinary,function(I){q.doWrite(I,D)})},T.prototype.uri=function(){var N=this.query||{},q=this.secure?"https":"http",D="";!1!==this.timestampRequests&&(N[this.timestampParam]=_()),this.supportsBinary||N.sid||(N.b64=1),N=R.encode(N),this.port&&("https"==q&&443!==+this.port||"http"==q&&80!==+this.port)&&(D=":"+this.port),N.length&&(N="?"+N);var I=-1!==this.hostname.indexOf(":");return q+"://"+(I?"["+this.hostname+"]":this.hostname)+D+this.path+N}},function(x,C,E){function T(P){this.path=P.path,this.hostname=P.hostname,this.port=P.port,this.secure=P.secure,this.query=P.query,this.timestampParam=P.timestampParam,this.timestampRequests=P.timestampRequests,this.readyState="",this.agent=P.agent||!1,this.socket=P.socket,this.enablesXDR=P.enablesXDR,this.pfx=P.pfx,this.key=P.key,this.passphrase=P.passphrase,this.cert=P.cert,this.ca=P.ca,this.ciphers=P.ciphers,this.rejectUnauthorized=P.rejectUnauthorized,this.forceNode=P.forceNode,this.extraHeaders=P.extraHeaders,this.localAddress=P.localAddress}var B=E(23),R=E(8);x.exports=T,R(T.prototype),T.prototype.onError=function(P,A){var _=new Error(P);return _.type="TransportError",_.description=A,this.emit("error",_),this},T.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},T.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},T.prototype.send=function(P){if("open"!==this.readyState)throw new Error("Transport not open");this.write(P)},T.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},T.prototype.onData=function(P){var A=B.decodePacket(P,this.socket.binaryType);this.onPacket(A)},T.prototype.onPacket=function(P){this.emit("packet",P)},T.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(x,C,E){(function(T){function B(G,Y){var V="b"+C.packets[G.type]+G.data.data;return Y(V)}function R(G,Y,V){if(!Y)return C.encodeBase64Packet(G,V);var K=G.data,J=new Uint8Array(K),$=new Uint8Array(1+K.byteLength);$[0]=U[G.type];for(var Q=0;Q<J.length;Q++)$[Q+1]=J[Q];return V($.buffer)}function P(G,Y,V){if(!Y)return C.encodeBase64Packet(G,V);var K=new FileReader;return K.onload=function(){G.data=K.result,C.encodePacket(G,Y,!0,V)},K.readAsArrayBuffer(G.data)}function A(G,Y,V){if(!Y)return C.encodeBase64Packet(G,V);if(z)return P(G,Y,V);var K=new Uint8Array(1);K[0]=U[G.type];var J=new W([K.buffer,G.data]);return V(J)}function _(G){try{G=L.decode(G,{strict:!1})}catch(Y){return!1}return G}function S(G,Y,V){for(var K=Array(G.length),J=I(G.length,V),$=function(Z,ee,te){Y(ee,function(oe,re){K[Z]=re,te(oe,K)})},Q=0;Q<G.length;Q++)$(Q,G[Q],J)}var O,N=E(24),q=E(9),D=E(25),I=E(26),L=E(27);T&&T.ArrayBuffer&&(O=E(29));var H="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),M="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),z=H||M;C.protocol=3;var U=C.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},F=N(U),X={type:"error",data:"parser error"},W=E(30);C.encodePacket=function(G,Y,V,K){"function"==typeof Y&&(K=Y,Y=!1),"function"==typeof V&&(K=V,V=null);var J=void 0===G.data?void 0:G.data.buffer||G.data;if(T.ArrayBuffer&&J instanceof ArrayBuffer)return R(G,Y,K);if(W&&J instanceof T.Blob)return A(G,Y,K);if(J&&J.base64)return B(G,K);var $=U[G.type];return void 0!==G.data&&($+=V?L.encode(G.data+"",{strict:!1}):G.data+""),K(""+$)},C.encodeBase64Packet=function(G,Y){var V="b"+C.packets[G.type];if(W&&G.data instanceof T.Blob){var K=new FileReader;return K.onload=function(){var ee=K.result.split(",")[1];Y(V+ee)},K.readAsDataURL(G.data)}var J;try{J=String.fromCharCode.apply(null,new Uint8Array(G.data))}catch(ee){for(var $=new Uint8Array(G.data),Q=Array($.length),Z=0;Z<$.length;Z++)Q[Z]=$[Z];J=String.fromCharCode.apply(null,Q)}return V+=T.btoa(J),Y(V)},C.decodePacket=function(G,Y,V){if(void 0===G)return X;if("string"==typeof G){if("b"===G.charAt(0))return C.decodeBase64Packet(G.substr(1),Y);if(V&&(G=_(G),!1===G))return X;var K=G.charAt(0);return+K==K&&F[K]?1<G.length?{type:F[K],data:G.substring(1)}:{type:F[K]}:X}var J=new Uint8Array(G),K=J[0],$=D(G,1);return W&&"blob"===Y&&($=new W([$])),{type:F[K],data:$}},C.decodeBase64Packet=function(G,Y){var V=F[G.charAt(0)];if(!O)return{type:V,data:{base64:!0,data:G.substr(1)}};var K=O.decode(G.substr(1));return"blob"===Y&&W&&(K=new W([K])),{type:V,data:K}},C.encodePayload=function(G,Y,V){function K(Q){return Q.length+":"+Q}"function"==typeof Y&&(V=Y,Y=null);var $=q(G);return Y&&$?W&&!z?C.encodePayloadAsBlob(G,V):C.encodePayloadAsArrayBuffer(G,V):G.length?void S(G,function(Q,Z){C.encodePacket(Q,!!$&&Y,!1,function(ee){Z(null,K(ee))})},function(Q,Z){return V(Z.join(""))}):V("0:")},C.decodePayload=function(G,Y,V){if("string"!=typeof G)return C.decodePayloadAsBinary(G,Y,V);"function"==typeof Y&&(V=Y,Y=null);var K;if(""===G)return V(X,0,1);for(var J,$,te,Q="",Z=0,ee=G.length;Z<ee;Z++)if(te=G.charAt(Z),":"===te){if(""==Q||Q!=(J=+Q))return V(X,0,1);if($=G.substr(Z+1,J),Q!=$.length)return V(X,0,1);if($.length){if(K=C.decodePacket($,Y,!1),X.type===K.type&&X.data===K.data)return V(X,0,1);var oe=V(K,Z+J,ee);if(!1===oe)return}Z+=J,Q=""}else Q+=te;return""===Q?void 0:V(X,0,1)},C.encodePayloadAsArrayBuffer=function(G,Y){return G.length?void S(G,function(K,J){C.encodePacket(K,!0,!0,function($){return J(null,$)})},function(K,J){var $=J.reduce(function(ee,te){var oe;return oe="string"==typeof te?te.length:te.byteLength,ee+oe.toString().length+oe+2},0),Q=new Uint8Array($),Z=0;return J.forEach(function(ee){var te="string"==typeof ee,oe=ee;if(te){for(var re=new Uint8Array(ee.length),ne=0;ne<ee.length;ne++)re[ne]=ee.charCodeAt(ne);oe=re.buffer}Q[Z++]=te?0:1;for(var ae=oe.byteLength.toString(),ne=0;ne<ae.length;ne++)Q[Z++]=parseInt(ae[ne]);Q[Z++]=255;for(var re=new Uint8Array(oe),ne=0;ne<re.length;ne++)Q[Z++]=re[ne]}),Y(Q.buffer)}):Y(new ArrayBuffer(0))},C.encodePayloadAsBlob=function(G,Y){S(G,function(K,J){C.encodePacket(K,!0,!0,function($){var Q=new Uint8Array(1);if(Q[0]=1,"string"==typeof $){for(var Z=new Uint8Array($.length),ee=0;ee<$.length;ee++)Z[ee]=$.charCodeAt(ee);$=Z.buffer,Q[0]=0}for(var te=$ instanceof ArrayBuffer?$.byteLength:$.size,oe=te.toString(),re=new Uint8Array(oe.length+1),ee=0;ee<oe.length;ee++)re[ee]=parseInt(oe[ee]);if(re[oe.length]=255,W){var ne=new W([Q.buffer,re.buffer,$]);J(null,ne)}})},function(K,J){return Y(new W(J))})},C.decodePayloadAsBinary=function(G,Y,V){"function"==typeof Y&&(V=Y,Y=null);for(var K=G,J=[];0<K.byteLength;){for(var $=new Uint8Array(K),Q=0===$[0],Z="",ee=1;255!==$[ee];ee++){if(310<Z.length)return V(X,0,1);Z+=$[ee]}K=D(K,2+Z.length),Z=parseInt(Z);var te=D(K,0,Z);if(Q)try{te=String.fromCharCode.apply(null,new Uint8Array(te))}catch(ne){var oe=new Uint8Array(te);te="";for(var ee=0;ee<oe.length;ee++)te+=String.fromCharCode(oe[ee])}J.push(te),K=D(K,Z)}var re=J.length;J.forEach(function(ne,ae){V(C.decodePacket(ne,Y,!0),ae,re)})}}).call(C,function(){return this}())},function(x){x.exports=Object.keys||function(E){var T=[],B=Object.prototype.hasOwnProperty;for(var R in E)B.call(E,R)&&T.push(R);return T}},function(x){x.exports=function(E,T,B){var R=E.byteLength;if(T=T||0,B=B||R,E.slice)return E.slice(T,B);if(0>T&&(T+=R),0>B&&(B+=R),B>R&&(B=R),T>=R||T>=B||0===R)return new ArrayBuffer(0);for(var P=new Uint8Array(E),A=new Uint8Array(B-T),_=T,S=0;_<B;_++,S++)A[S]=P[_];return A.buffer}},function(x){function T(){}x.exports=function(B,R,P){function A(S,O){if(0>=A.count)throw new Error("after called too many times");--A.count,S?(_=!0,R(S),R=P):0!==A.count||_||R(null,O)}var _=!1;return P=P||T,A.count=B,0===B?R():A}},function(x,C,E){var T;(function(B,R){!function(P){function A(G){for(var Y,V,K=[],J=0,$=G.length;J<$;)Y=G.charCodeAt(J++),55296<=Y&&56319>=Y&&J<$?(V=G.charCodeAt(J++),56320==(64512&V)?K.push(((1023&Y)<<10)+(1023&V)+65536):(K.push(Y),J--)):K.push(Y);return K}function _(G){for(var Y,V=G.length,K=-1,J="";++K<V;)Y=G[K],65535<Y&&(Y-=65536,J+=X(55296|1023&Y>>>10),Y=56320|1023&Y),J+=X(Y);return J}function S(G,Y){if(55296<=G&&57343>=G){if(Y)throw Error("Lone surrogate U+"+G.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function O(G,Y){return X(128|63&G>>Y)}function N(G,Y){if(0==(4294967168&G))return X(G);var V="";return 0==(4294965248&G)?V=X(192|31&G>>6):0==(4294901760&G)?(S(G,Y)||(G=65533),V=X(224|15&G>>12),V+=O(G,6)):0==(4292870144&G)&&(V=X(240|7&G>>18),V+=O(G,12),V+=O(G,6)),V+=X(128|63&G)}function D(){if(F>=U)throw Error("Invalid byte index");var G=255&z[F];if(F++,128==(192&G))return 63&G;throw Error("Invalid continuation byte")}function I(G){var Y,V,K,J,$;if(F>U)throw Error("Invalid byte index");if(F==U)return!1;if(Y=255&z[F],F++,0==(128&Y))return Y;if(192==(224&Y)){if(V=D(),$=(31&Y)<<6|V,128<=$)return $;throw Error("Invalid continuation byte")}if(224==(240&Y)){if(V=D(),K=D(),$=(15&Y)<<12|V<<6|K,2048<=$)return S($,G)?$:65533;throw Error("Invalid continuation byte")}if(240==(248&Y)&&(V=D(),K=D(),J=D(),$=(7&Y)<<18|V<<12|K<<6|J,65536<=$&&1114111>=$))return $;throw Error("Invalid UTF-8 detected")}var M=("object"==typeof B&&B&&B.exports==("object"==typeof C&&C)&&B,"object"==typeof R&&R);M.global!==M&&M.window!==M||(P=M);var z,U,F,X=String.fromCharCode,W={version:"2.1.2",encode:function(G,Y){Y=Y||{};for(var V,K=!1!==Y.strict,J=A(G),$=J.length,Q=-1,Z="";++Q<$;)V=J[Q],Z+=N(V,K);return Z},decode:function(G,Y){Y=Y||{};var V=!1!==Y.strict;z=A(G),U=z.length,F=0;for(var K,J=[];!1!==(K=I(V));)J.push(K);return _(J)}};T=function(){return W}.call(C,E,C,B),!(void 0!==T&&(B.exports=T))}(this)}).call(C,E(28)(x),function(){return this}())},function(x){x.exports=function(E){return E.webpackPolyfill||(E.deprecate=function(){},E.paths=[],E.children=[],E.webpackPolyfill=1),E}},function(x,C){!function(){"use strict";for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=new Uint8Array(256),B=0;B<E.length;B++)T[E.charCodeAt(B)]=B;C.encode=function(R){var P,A=new Uint8Array(R),_=A.length,S="";for(P=0;P<_;P+=3)S+=E[A[P]>>2],S+=E[(3&A[P])<<4|A[P+1]>>4],S+=E[(15&A[P+1])<<2|A[P+2]>>6],S+=E[63&A[P+2]];return 2==_%3?S=S.substring(0,S.length-1)+"=":1==_%3&&(S=S.substring(0,S.length-2)+"=="),S},C.decode=function(R){var P,A,_,S,O,N=.75*R.length,q=R.length,D=0;"="===R[R.length-1]&&(N--,"="===R[R.length-2]&&N--);var I=new ArrayBuffer(N),L=new Uint8Array(I);for(P=0;P<q;P+=4)A=T[R.charCodeAt(P)],_=T[R.charCodeAt(P+1)],S=T[R.charCodeAt(P+2)],O=T[R.charCodeAt(P+3)],L[D++]=A<<2|_>>4,L[D++]=(15&_)<<4|S>>2,L[D++]=(3&S)<<6|63&O;return I}}()},function(x,C){(function(E){function T(O){for(var q,N=0;N<O.length;N++)if(q=O[N],q.buffer instanceof ArrayBuffer){var D=q.buffer;if(q.byteLength!==D.byteLength){var I=new Uint8Array(q.byteLength);I.set(new Uint8Array(D,q.byteOffset,q.byteLength)),D=I.buffer}O[N]=D}}function B(O,N){N=N||{};var q=new P;T(O);for(var D=0;D<O.length;D++)q.append(O[D]);return N.type?q.getBlob(N.type):q.getBlob()}function R(O,N){return T(O),new Blob(O,N||{})}var P=E.BlobBuilder||E.WebKitBlobBuilder||E.MSBlobBuilder||E.MozBlobBuilder,A=function(){try{var O=new Blob(["hi"]);return 2===O.size}catch(N){return!1}}(),_=A&&function(){try{var O=new Blob([new Uint8Array([1,2])]);return 2===O.size}catch(N){return!1}}(),S=P&&P.prototype.append&&P.prototype.getBlob;x.exports=function(){return A?_?E.Blob:R:S?B:void 0}()}).call(C,function(){return this}())},function(x,C){C.encode=function(E){var T="";for(var B in E)E.hasOwnProperty(B)&&(T.length&&(T+="&"),T+=encodeURIComponent(B)+"="+encodeURIComponent(E[B]));return T},C.decode=function(E){for(var A,T={},B=E.split("&"),R=0,P=B.length;R<P;R++)A=B[R].split("="),T[decodeURIComponent(A[0])]=decodeURIComponent(A[1]);return T}},function(x){x.exports=function(E,T){var B=function(){};B.prototype=T.prototype,E.prototype=new B,E.prototype.constructor=E}},function(x){"use strict";function E(N){var q="";do q=P[N%A]+q,N=Math.floor(N/A);while(0<N);return q}function B(){var N=E(+new Date);return N===R?N+"."+E(S++):(S=0,R=N)}for(var R,P="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),A=64,_={},S=0,O=0;O<A;O++)_[P[O]]=O;B.encode=E,B.decode=function(N){var q=0;for(O=0;O<N.length;O++)q=q*A+_[N.charAt(O)];return q},x.exports=B},function(x,C,E){(function(T){function B(){}function R(N){P.call(this,N),this.query=this.query||{},_||(T.___eio||(T.___eio=[]),_=T.___eio),this.index=_.length;var q=this;_.push(function(D){q.onData(D)}),this.query.j=this.index,T.document&&T.addEventListener&&T.addEventListener("beforeunload",function(){q.script&&(q.script.onerror=B)},!1)}var P=E(21),A=E(32);x.exports=R;var _,S=/\n/g,O=/\\n/g;A(R,P),R.prototype.supportsBinary=!1,R.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),P.prototype.doClose.call(this)},R.prototype.doPoll=function(){var N=this,q=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),q.async=!0,q.src=this.uri(),q.onerror=function(L){N.onError("jsonp poll error",L)};var D=document.getElementsByTagName("script")[0];D?D.parentNode.insertBefore(q,D):(document.head||document.body).appendChild(q),this.script=q;var I="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);I&&setTimeout(function(){var L=document.createElement("iframe");document.body.appendChild(L),document.body.removeChild(L)},100)},R.prototype.doWrite=function(N,q){function D(){I(),q()}function I(){if(L.iframe)try{L.form.removeChild(L.iframe)}catch(X){L.onError("jsonp polling iframe removal error",X)}try{var F="<iframe src=\"javascript:0\" name=\""+L.iframeId+"\">";H=document.createElement(F)}catch(X){H=document.createElement("iframe"),H.name=L.iframeId,H.src="javascript:0"}H.id=L.iframeId,L.form.appendChild(H),L.iframe=H}var L=this;if(!this.form){var H,M=document.createElement("form"),z=document.createElement("textarea"),U=this.iframeId="eio_iframe_"+this.index;M.className="socketio",M.style.position="absolute",M.style.top="-1000px",M.style.left="-1000px",M.target=U,M.method="POST",M.setAttribute("accept-charset","utf-8"),z.name="d",M.appendChild(z),document.body.appendChild(M),this.form=M,this.area=z}this.form.action=this.uri(),I(),N=N.replace(O,"\\\n"),this.area.value=N.replace(S,"\\n");try{this.form.submit()}catch(F){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===L.iframe.readyState&&D()}:this.iframe.onload=D}}).call(C,function(){return this}())},function(x,C,E){(function(T){function B(I){var L=I&&I.forceBase64;L&&(this.supportsBinary=!1),this.perMessageDeflate=I.perMessageDeflate,this.usingBrowserWebSocket=q&&!I.forceNode,this.protocols=I.protocols,this.usingBrowserWebSocket||(D=R),P.call(this,I)}var R,P=E(22),A=E(23),_=E(31),S=E(32),O=E(33),N=E(3)("engine.io-client:websocket"),q=T.WebSocket||T.MozWebSocket;if("undefined"==typeof window)try{R=E(36)}catch(I){}var D=q;D||"undefined"!=typeof window||(D=R),x.exports=B,S(B,P),B.prototype.name="websocket",B.prototype.supportsBinary=!0,B.prototype.doOpen=function(){if(this.check()){var I=this.uri(),L=this.protocols,H={agent:this.agent,perMessageDeflate:this.perMessageDeflate};H.pfx=this.pfx,H.key=this.key,H.passphrase=this.passphrase,H.cert=this.cert,H.ca=this.ca,H.ciphers=this.ciphers,H.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(H.headers=this.extraHeaders),this.localAddress&&(H.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?L?new D(I,L):new D(I):new D(I,L,H)}catch(M){return this.emit("error",M)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},B.prototype.addEventListeners=function(){var I=this;this.ws.onopen=function(){I.onOpen()},this.ws.onclose=function(){I.onClose()},this.ws.onmessage=function(L){I.onData(L.data)},this.ws.onerror=function(L){I.onError("websocket error",L)}},B.prototype.write=function(I){function L(){H.emit("flush"),setTimeout(function(){H.writable=!0,H.emit("drain")},0)}var H=this;this.writable=!1;for(var M=I.length,z=0,U=M;z<U;z++)!function(F){A.encodePacket(F,H.supportsBinary,function(X){if(!H.usingBrowserWebSocket){var W={};if(F.options&&(W.compress=F.options.compress),H.perMessageDeflate){var G="string"==typeof X?T.Buffer.byteLength(X):X.length;G<H.perMessageDeflate.threshold&&(W.compress=!1)}}try{H.usingBrowserWebSocket?H.ws.send(X):H.ws.send(X,W)}catch(Y){N("websocket closed before onclose event")}--M||L()})}(I[z])},B.prototype.onClose=function(){P.prototype.onClose.call(this)},B.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},B.prototype.uri=function(){var I=this.query||{},L=this.secure?"wss":"ws",H="";this.port&&("wss"==L&&443!==+this.port||"ws"==L&&80!==+this.port)&&(H=":"+this.port),this.timestampRequests&&(I[this.timestampParam]=O()),this.supportsBinary||(I.b64=1),I=_.encode(I),I.length&&(I="?"+I);var M=-1!==this.hostname.indexOf(":");return L+"://"+(M?"["+this.hostname+"]":this.hostname)+H+this.path+I},B.prototype.check=function(){return D&&(!("__initialize"in D)||this.name!==B.prototype.name)}}).call(C,function(){return this}())},function(){},function(x){var E=[].indexOf;x.exports=function(T,B){if(E)return T.indexOf(B);for(var R=0;R<T.length;++R)if(T[R]===B)return R;return-1}},function(x,C){(function(E){var T=/^[\],:{}\s]*$/,B=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,R=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,P=/(?:^|:|,)(?:\s*\[)+/g,A=/^\s+/,_=/\s+$/;x.exports=function(S){return"string"==typeof S&&S?(S=S.replace(A,"").replace(_,""),E.JSON&&JSON.parse?JSON.parse(S):T.test(S.replace(B,"@").replace(R,"]").replace(P,""))?new Function("return "+S)():void 0):null}}).call(C,function(){return this}())},function(x,C,E){"use strict";function T(I,L,H){this.io=I,this.nsp=L,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,H&&H.query&&(this.query=H.query),this.io.autoConnect&&this.open()}var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},R=E(7),P=E(8),A=E(40),_=E(41),S=E(42),O=E(3)("socket.io-client:socket"),N=E(31);x.exports=C=T;var q={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},D=P.prototype.emit;P(T.prototype),T.prototype.subEvents=function(){if(!this.subs){var I=this.io;this.subs=[_(I,"open",S(this,"onopen")),_(I,"packet",S(this,"onpacket")),_(I,"close",S(this,"onclose"))]}},T.prototype.open=T.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},T.prototype.send=function(){var I=A(arguments);return I.unshift("message"),this.emit.apply(this,I),this},T.prototype.emit=function(I){if(q.hasOwnProperty(I))return D.apply(this,arguments),this;var L=A(arguments),H={type:R.EVENT,data:L};return H.options={},H.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof L[L.length-1]&&(O("emitting packet with ack id %d",this.ids),this.acks[this.ids]=L.pop(),H.id=this.ids++),this.connected?this.packet(H):this.sendBuffer.push(H),delete this.flags,this},T.prototype.packet=function(I){I.nsp=this.nsp,this.io.packet(I)},T.prototype.onopen=function(){if(O("transport is open - connecting"),"/"!==this.nsp)if(this.query){var I="object"===B(this.query)?N.encode(this.query):this.query;O("sending connect packet with query %s",I),this.packet({type:R.CONNECT,query:I})}else this.packet({type:R.CONNECT})},T.prototype.onclose=function(I){O("close (%s)",I),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",I)},T.prototype.onpacket=function(I){if(I.nsp===this.nsp)switch(I.type){case R.CONNECT:this.onconnect();break;case R.EVENT:this.onevent(I);break;case R.BINARY_EVENT:this.onevent(I);break;case R.ACK:this.onack(I);break;case R.BINARY_ACK:this.onack(I);break;case R.DISCONNECT:this.ondisconnect();break;case R.ERROR:this.emit("error",I.data);}},T.prototype.onevent=function(I){var L=I.data||[];O("emitting event %j",L),null!=I.id&&(O("attaching ack callback to event"),L.push(this.ack(I.id))),this.connected?D.apply(this,L):this.receiveBuffer.push(L)},T.prototype.ack=function(I){var L=this,H=!1;return function(){if(!H){H=!0;var M=A(arguments);O("sending ack %j",M),L.packet({type:R.ACK,id:I,data:M})}}},T.prototype.onack=function(I){var L=this.acks[I.id];"function"==typeof L?(O("calling ack %s with %j",I.id,I.data),L.apply(this,I.data),delete this.acks[I.id]):O("bad ack %s",I.id)},T.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},T.prototype.emitBuffered=function(){var I;for(I=0;I<this.receiveBuffer.length;I++)D.apply(this,this.receiveBuffer[I]);for(this.receiveBuffer=[],I=0;I<this.sendBuffer.length;I++)this.packet(this.sendBuffer[I]);this.sendBuffer=[]},T.prototype.ondisconnect=function(){O("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},T.prototype.destroy=function(){if(this.subs){for(var I=0;I<this.subs.length;I++)this.subs[I].destroy();this.subs=null}this.io.destroy(this)},T.prototype.close=T.prototype.disconnect=function(){return this.connected&&(O("performing disconnect (%s)",this.nsp),this.packet({type:R.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},T.prototype.compress=function(I){return this.flags=this.flags||{},this.flags.compress=I,this}},function(x){x.exports=function(T,B){var R=[];B=B||0;for(var P=B||0;P<T.length;P++)R[P-B]=T[P];return R}},function(x){"use strict";x.exports=function(T,B,R){return T.on(B,R),{destroy:function(){T.removeListener(B,R)}}}},function(x){var E=[].slice;x.exports=function(T,B){if("string"==typeof B&&(B=T[B]),"function"!=typeof B)throw new Error("bind() requires a function");var R=E.call(arguments,2);return function(){return B.apply(T,R.concat(E.call(arguments)))}}},function(x){function E(T){T=T||{},this.ms=T.min||100,this.max=T.max||1e4,this.factor=T.factor||2,this.jitter=0<T.jitter&&1>=T.jitter?T.jitter:0,this.attempts=0}x.exports=E,E.prototype.duration=function(){var T=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var B=Math.random(),R=Math.floor(B*this.jitter*T);T=0==(1&Math.floor(10*B))?T-R:T+R}return 0|Math.min(T,this.max)},E.prototype.reset=function(){this.attempts=0},E.prototype.setMin=function(T){this.ms=T},E.prototype.setMax=function(T){this.max=T},E.prototype.setJitter=function(T){this.jitter=T}}])});function ApiSitter(){this.setClientTelegramAuthParameters=function(x,C){this.idClientTelegram=x.toString(),this.tokenClientTelegram=C.toString()},this.sendCodeForCreateClient=function(x,C,E,T,B){try{if(!x||!C)return B("GENERIC_ERROR_API",null,"apiSitterEmail or apiSitterToken not in input");var A=new XMLHttpRequest,_=this;A.addEventListener("readystatechange",function(){if(4===this.readyState){if(0==this.status)return B("GENERIC_ERROR_API",null,null);if(200!=this.status)return B(null,this.status,this.responseText);var S=null;try{S=JSON.parse(this.responseText),_.idClientTelegram=S.id,_.tokenClientTelegram=S.token}catch(O){S=this.responseText}return B(null,this.status,S)}}),A.open("GET","https://chat.apisitter.io/apiTelegram/sendCode/"+E+"/"+T),A.setRequestHeader("content-type","application/json"),A.setRequestHeader("authorization","Basic "+btoa(x+":"+C)),A.setRequestHeader("cache-control","no-cache"),A.send(null)}catch(S){B("GENERIC_ERROR_IN_METHOD",null,null)}},this.callApi=function(x,C,E,T,B){try{E="POST"==x?JSON.stringify(E):null;var P=new XMLHttpRequest;P.addEventListener("readystatechange",function(){if(4===this.readyState){if(0==this.status)return T("GENERIC_ERROR_API",null,null);if(200!=this.status)return T(null,this.status,this.responseText);var A=null;try{A=JSON.parse(this.responseText)}catch(_){A=this.responseText}return T(null,this.status,A)}}),P.ontimeout=function(){return T("GENERIC_ERROR_API",null,"Call timeout error")},P.open(x,"https://chat.apisitter.io/apiTelegram/"+C),P.setRequestHeader("content-type","application/json"),P.setRequestHeader("authorization","Basic "+btoa(this.idClientTelegram+":"+this.tokenClientTelegram)),P.setRequestHeader("cache-control","no-cache"),P.timeout=B&&B.timeout?B.timeout:2e4,P.send(E)}catch(A){T("GENERIC_ERROR_IN_METHOD",null,null)}},this.openUpdatesListener=function(x){try{var C=this;this.callApi("GET","getConfigurationWebSocket",null,function(E,T,B){if(E)return x("onError","Internal ApiSitter error");return C.socket?x("onError","Socker already open"):void(C.socket=io.connect(B.url),C.socket.on("connect",function(){var R={id:C.idClientTelegram,token:C.tokenClientTelegram};C.socket.emit("autentication",R),x("onConnect","")}),C.socket.on("disconnect",function(){x("onDisconnect",null)}),C.socket.on("message",function(R){x("onUpdate",R)}),C.socket.on("errorWi-Tek",function(R){x("onError",R)}),setInterval(function(){C.socket.emit("MyPing","-")}.bind(this),1.8e5))})}catch(E){x("GENERIC_ERROR_IN_METHOD",null,null)}},this.closeUpdatesListener=function(){this.socket=io.disconnect()},this.closeClientTelegram=function(x){try{this.callApi("GET","closeClient",null,function(C,E,T){x(C,E,T)})}catch(C){return x("GENERIC_ERROR_IN_METHOD",null,null)}},this.getIdClientTelegram=function(){return this.idClientTelegram},this.getTokenClientTelegram=function(){return this.tokenClientTelegram},this.uploadFile=async function(x,C,E,T){let B=new UploadFile(this.idClientTelegram,this.tokenClientTelegram);B.uploadFile(x,C,E,T)},this.downloadFile=async function(x,C,E,T,B,R){let P=new DownloadFile(this.idClientTelegram,this.tokenClientTelegram);P.downloadFile(x,C,E,T,B,R)}}function DownloadFile(x,C){this.idCLientTelegram=x,this.tokenClientTelegram=C,this.downloadFile=async function(E,T,B,R,P,A){try{this.dc_id=T;var _={};if(_.timeout=15000,_.sizeFilePart=8192,_.parallelDownloadParts=5,_.maxRetry=3,_.type="",_.dc_id=T,A)for(var S in A)_.hasOwnProperty(S)&&(_[S]=A[S]);B||(B=1e7),this.numberOfParts=Math.ceil(B/_.sizeFilePart),this.partsCompleted=0;var O=Math.ceil(this.numberOfParts/_.parallelDownloadParts);let I,D=!1,L=[];for(let M,H=0;H<O;H++){M=new Date().getTime();var N=[],q=!1;for(let F,U=5*H;U<this.numberOfParts&&U<5*(H+1);U++)F={offset:U*_.sizeFilePart,limit:_.sizeFilePart,location:E},N.push(this.downloadPart(F,U*_.sizeFilePart,_.timeout,0,_.maxRetry,R));let z;if(await Promise.all(N).then(U=>{z=U;for(let F=0;F<U.length;F++)if(0>=U[F].bytes.data.length)D=!0;else{for(let X=0;X<U[F].bytes.data.length;X++)L.push(U[F].bytes.data[X]);I=U[F],I.bytes.data=L}}).catch(()=>{q=!0}),q)return P("GENERIC_ERROR_IN_METHOD");if(!0==D)return P(null,null,I);I=z[z.length-1]}return I.bytes.data=L,P(null,null,I)}catch(D){return P("GENERIC_ERROR_IN_METHOD",null,null)}},this.downloadPart=function(E,T,B,R,P,A){var _=this;return new Promise(function(S,O){var N="https://chat.apisitter.io/apiTelegram/upload.getFile/"+this.dc_id;let q=JSON.stringify(E);var D=new XMLHttpRequest;D.addEventListener("readystatechange",function(){if(4===this.readyState)if(0==this.status)R<P?(R++,S(_.downloadPart(E,T,B,R,P,A))):O("Error");else if(200==this.status){var I=null;try{I=JSON.parse(this.responseText)}catch(L){I=this.responseText}_.partsCompleted++,A(_.partsCompleted,_.numberOfParts),S(I)}else R<P?(R++,_.dc_id=_.getDC(this.responseText),S(_.downloadPart(E,T,B,R,P,A))):O("Error")}),D.open("POST",N),D.setRequestHeader("content-type","application/json"),D.setRequestHeader("authorization","Basic "+btoa(this.idCLientTelegram+":"+this.tokenClientTelegram)),D.setRequestHeader("cache-control","no-cache"),D.timeout=B,D.send(q)}.bind(this))},this.getDC=function(E){var T="MIGRATE_";if(-1!=E.search(T)){var B=parseInt(E.substring(E.search(T)+T.length,E.length));return B}return 4}}function UploadFile(x,C){this.idCLientTelegram=x,this.tokenClientTelegram=C,this.uploadFile=async function(E,T,B,R){try{if(1e7<E.length)return B("FILE_TOO_BIG");var P=131072,A=5,_=3;R&&R.sizeFilePart&&(P=R.sizeFilePart),R&&R.parallelUploadParts&&(A=R.parallelUploadParts),R&&R.maxRetry&&(_=R.maxRetry),this.numberOfParts=Math.ceil(E.length/P),this.partsCompleted=0;var O=Math.ceil(this.numberOfParts/A);let D=Math.floor(Math.random()*new Date().getTime()+1);for(let L,I=0;I<O;I++){L=new Date().getTime();var N=[],q=!1;for(let M,H=5*I;H<this.numberOfParts&&H<5*(I+1);H++)M=E.slice(H*P,(H+1)*P),N.push(this.uploadPart(D,H,M,15000,0,_,T));if(await Promise.all(N).then(()=>{}).catch(()=>{q=!0}),q)return B("GENERIC_ERROR_IN_METHOD")}return B(null,{id:D,parts:this.numberOfParts})}catch(D){return B("GENERIC_ERROR_IN_METHOD",null)}},this.uploadPart=function(E,T,B,R,P,A,_){var S=this;return new Promise(function(O,N){var D={file_id:E,file_part:T,bytes:B};D=JSON.stringify(D);var I=new XMLHttpRequest;I.addEventListener("readystatechange",function(){if(4===this.readyState)if(0==this.status)P<A?(P++,O(S.uploadPart(E,T,B,R,P,A,_))):N("Error");else if(200==this.status){var L=null;try{L=JSON.parse(this.responseText)}catch(H){L=this.responseText}S.partsCompleted++,_(E,S.partsCompleted,S.numberOfParts),O(L)}else P<A?(P++,O(S.uploadPart(E,T,B,R,P,A,_))):N("Error")}),I.ontimeout=function(){P<A?(P++,O(S.uploadPart(E,T,B,R,P,A,_))):N("Timeout Error")},I.open("POST","https://chat.apisitter.io/apiTelegram/upload.saveFilePart"),I.setRequestHeader("content-type","application/json"),I.setRequestHeader("authorization","Basic "+btoa(this.idCLientTelegram+":"+this.tokenClientTelegram)),I.setRequestHeader("cache-control","no-cache"),I.timeout=R,I.send(D)}.bind(this))}}